# TraceGuard 项目简介

## 项目概述

- **项目名称**: TraceGuard（标签溯源系统）
- **技术栈**: Spring Boot 2.5.15 + MyBatis + Redis + JWT + Vue（前端）
- **基础框架**: 基于 RuoYi v3.9.1 前后端分离快速开发框架
- **项目版本**: 1.0.0
- **开发年份**: 2026

---

## 核心业务功能

### 1. 产品管理

**文件位置**: [TgProduct.java](TraceGuard-feature/src/main/java/com/arsc/traceGuard/feature/domain/TgProduct.java)

- 产品信息维护（名称、图片、检测报告等）
- 质检参数管理（JSON格式存储）
- 企业简介和联系方式
- 使用攻略和储存说明（富文本）
- 产品图片和公司Logo管理

**主要字段**:
- 产品编码、产品名称
- 使用说明、检测报告
- 公司介绍、联系方式
- 质检参数（JSON格式）
- 检测报告PDF文件和预览图
- 使用攻略和企业简介（富文本）
- 公司地址、公司Logo
- 储存说明

---

### 2. 防伪码管理

**文件位置**: [TgTraceCode.java](TraceGuard-feature/src/main/java/com/arsc/traceGuard/feature/domain/TgTraceCode.java)

- 防伪码生成（UUID格式）
- 防伪码状态管理（待激活/正常/作废）
- 扫码状态追踪（未扫码/已扫码）
- 扫码次数统计
- 首次扫码时间和IP记录
- 首次扫码地址记录
- 二维码链接生成

**主要字段**:
- 防伪码ID、防伪码值（UUID）
- 产品名称、生成批次号
- 防伪码状态（2=待激活，0=正常，1=作废）
- 扫码状态（0=未扫码，1=已扫码）
- 扫码次数
- 首次扫码时间、首次扫码IP、首次扫码地址
- 防伪二维码链接
- 产品ID、防伪码类型（0-产品，1-优惠券）
- 优惠券编号

---

### 3. 批次管理

**文件位置**: [TgBatch.java](TraceGuard-feature/src/main/java/com/arsc/traceGuard/feature/domain/TgBatch.java)

- 批次号管理（唯一索引）
- 支持产品和优惠券两种业务类型
- 生码总数、扫码次数、已激活数量统计
- 批次状态控制（正常/冻结/作废）

**主要字段**:
- 批次ID、批次号（唯一索引）
- 业务类型（0=产品，1=优惠券）
- 关联ID（产品ID或优惠券ID）
- 冗余名称（产品名/券名，避免列表查询联表）
- 生码总数
- 扫码总次数（定期同步）
- 已激活数量
- 批次状态（0正常，1冻结/作废）

---

### 4. 优惠券管理

**文件位置**: [TgCoupon.java](TraceGuard-feature/src/main/java/com/arsc/traceGuard/feature/domain/TgCoupon.java)

- 优惠券信息维护
- 面值/折扣设置
- 有效期管理

**主要字段**:
- 优惠券ID、优惠券名称
- 面值/折扣
- 有效期开始、有效期结束
- 状态

---

### 5. 扫码日志

**文件位置**: [TgScanLog.java](TraceGuard-feature/src/main/java/com/arsc/traceGuard/feature/domain/TgScanLog.java)

- 记录每次扫码行为
- 扫描者IP和位置信息
- 浏览器标识
- 异常扫码识别

**主要字段**:
- 日志ID
- 关联防伪码
- 扫描者IP
- 扫描位置
- 浏览器标识
- 状态（0正常，1异常）

---

### 6. 消费者H5端

**文件位置**: [TgH5Controller.java](TraceGuard-admin/src/main/java/com/arsc/traceGuard/web/controller/feature/TgH5Controller.java)

**接口**: `/api/h5/verify`

- 提供无需登录的扫码验证接口
- 自动记录扫码环境信息（IP、User-Agent）
- 实时返回防伪验证结果
- 支持License验证

---

### 7. 数据看板

**文件位置**: [DashboardController.java](TraceGuard-admin/src/main/java/com/arsc/traceGuard/web/controller/feature/DashboardController.java)

**接口**: `/feature/dashboard/data`

- 产品总数、防伪码总数、扫码总数统计
- 异常扫码监控
- 近7天扫码趋势图
- 产品扫码排名
- 省份扫码分布（地图可视化）

**数据指标**:
- 总产品数
- 总防伪码数
- 总扫码数
- 异常扫码数
- 扫码趋势（近7天）
- 产品扫码排名
- 省份扫码分布统计

---

## 技术架构

### 模块划分

| 模块名称 | 说明 |
|---------|------|
| **TraceGuard-admin** | Web服务入口，包含Controller层 |
| **TraceGuard-common** | 公共模块（工具类、注解、常量、异常处理） |
| **TraceGuard-framework** | 框架核心（安全配置、数据源、拦截器等） |
| **TraceGuard-feature** | 业务功能模块（防伪溯源核心业务） |
| **TraceGuard-system** | 系统管理模块（用户、角色、菜单等） |
| **TraceGuard-quartz** | 定时任务模块 |
| **TraceGuard-generator** | 代码生成器 |

### 核心技术特性

- **安全认证**: Spring Security + JWT
- **缓存**: Redis（令牌管理、缓存监控）
- **数据库**: MySQL + MyBatis + Druid连接池
- **接口文档**: Swagger 3
- **权限控制**: 基于角色的访问控制（RBAC）
- **数据权限**: 支持部门级数据权限控制
- **防攻击**: XSS过滤、防盗链、重复提交拦截
- **热部署**: Spring Boot DevTools支持
- **国际化**: i18n多语言支持

### 配置信息

**服务端口**: 8080

**数据库配置**:
- 数据库类型: MySQL
- 连接池: Druid
- ORM框架: MyBatis
- 分页插件: PageHelper

**Redis配置**:
- 地址: localhost:6379
- 数据库索引: 0
- 连接超时: 10s

**Token配置**:
- 令牌自定义标识: Authorization
- 令牌有效期: 30分钟

---

## 业务流程

```
产品录入 → 批次生成 → 二维码打印 → 消费者扫码 → 数据统计
```

### 详细流程

1. **产品录入**
   - 管理员添加产品信息
   - 上传检测报告、产品图片
   - 填写企业简介、联系方式
   - 配置质检参数

2. **批次生成**
   - 为产品创建批次
   - 批量生成防伪码（UUID格式）
   - 生成二维码链接
   - 导出防伪码数据

3. **二维码打印**
   - 导出防伪码二维码
   - 贴到产品包装上
   - 可批量打印

4. **消费者扫码**
   - 扫描二维码
   - 系统验证防伪码有效性
   - 记录扫码日志（IP、位置、时间）
   - 返回验证结果（正常/异常）

5. **数据统计**
   - 管理员查看扫码数据
   - 异常扫码监控
   - 地域分布分析
   - 趋势分析

---

## 特色功能

### 1. 双重业务支持
- 既支持产品防伪
- 也支持优惠券防伪

### 2. 实时监控
- 扫码日志实时记录
- 异常扫码及时预警
- 首次扫码信息追踪

### 3. 数据可视化
- 多维度数据看板
- 趋势图展示
- 地图分布展示
- 产品排名展示

### 4. 灵活扩展
- 基于RuoYi框架
- 支持代码生成快速开发
- 模块化设计，易于扩展

### 5. 安全可靠
- JWT令牌认证
- XSS攻击防护
- 防盗链保护
- 重复提交拦截
- 数据权限控制

---

## 系统内置功能

基于RuoYi框架，系统还包含以下基础功能：

1. **用户管理**: 用户配置和权限管理
2. **部门管理**: 组织机构管理，树结构展现
3. **岗位管理**: 用户职务配置
4. **菜单管理**: 系统菜单和权限配置
5. **角色管理**: 角色权限分配和数据权限划分
6. **字典管理**: 系统固定数据维护
7. **参数管理**: 系统动态参数配置
8. **通知公告**: 系统通知发布
9. **操作日志**: 系统操作日志记录和查询
10. **登录日志**: 登录日志记录查询
11. **在线用户**: 当前活跃用户监控
12. **定时任务**: 在线任务调度和执行日志
13. **代码生成**: 前后端代码一键生成
14. **系统接口**: 自动生成API接口文档
15. **服务监控**: CPU、内存、磁盘等监控
16. **缓存监控**: Redis缓存信息查询
17. **在线构建器**: 拖动表单生成HTML代码
18. **连接池监视**: 数据库连接池状态监控

---

## 适用场景

这是一个典型的**企业级防伪溯源SaaS系统**，适用于：

- 🍎 **食品行业**: 农产品、食品饮料等
- 💊 **医药行业**: 药品、保健品等
- 💄 **化妆品行业**: 护肤品、彩妆等
- 🏭 **制造业**: 电子产品、机械设备等
- 📦 **物流行业**: 包裹追踪、溯源管理
- 🎁 **礼品行业**: 奢侈品、收藏品等

---

## 技术栈总结

### 后端技术
- Spring Boot 2.5.15
- Spring Security
- MyBatis
- Redis
- JWT
- Druid
- Swagger 3
- Quartz

### 前端技术
- Vue
- Element UI
- Axios

### 开发工具
- Maven
- Git
- IDEA

---

## 项目结构

```
TraceGuard/
├── TraceGuard-admin/          # Web服务入口
├── TraceGuard-common/         # 公共模块
├── TraceGuard-framework/      # 框架核心
├── TraceGuard-feature/        # 业务功能模块
├── TraceGuard-system/         # 系统管理模块
├── TraceGuard-quartz/         # 定时任务模块
├── TraceGuard-generator/      # 代码生成器
├── README.md
└── pom.xml
```

---

## 总结

TraceGuard是一个功能完善、架构清晰的企业级防伪溯源管理系统。基于成熟的RuoYi框架，结合防伪溯源的业务特点，实现了从产品管理、防伪码生成、扫码验证到数据分析的完整业务闭环。系统具有良好的扩展性和安全性，适用于多种行业的防伪溯源需求。
